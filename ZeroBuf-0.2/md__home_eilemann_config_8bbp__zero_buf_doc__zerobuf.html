<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ZeroBuf: Zerobuf Binary Encoding</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ZeroBuf
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">Zero-copy, zero-serialize, zero-hassle protocol buffers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_eilemann_config_8bbp__zero_buf_doc__zerobuf.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Zerobuf Binary Encoding </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Nomenclature: A Zerobuf object is the instantiation of a class compiled from a schema file by the Zerobuf compiler. A zerobuf (lower case) is the memory buffer of a Zerobuf object. It is a single memory allocation, i.e., a pointer with a size, and can be serialized as is without any additional transformation.</p>
<p>Zerobuf objects save all their member data in a single memory buffer in host endianness. It is the receiving node's responsibility to correct the endianness in a received zerobuf. The zerobuf binary format doubles as the serialization protocol and needs to be implemented by all language bindings correctly. Implementations may differ in their memory allocation strategy.</p>
<p>The zerobuf binary format is as follows, and will be explained below: </p>
<pre class="fragment">[version][dynamic storage headers][static storage][dynamic storage]
  dynamic storage headers: 8b offset, 8b size
    for all dynamic objects in order of spec
      implemented: dynamic arrays of builtins and static objects, strings
      not implemented: arrays of dynamic objects, dynamic sub-classes
  static storage: 1,2,4,8,16b (* static array size)
    for all static arrays and variables in order of spec
    Builtin types are: int (4b), uint (4b), float (4b), double (8b),
      byte (1b), short (2b), ubyte (1b), ushort (2b), ulong (8b),
      uint8_t (1b), uint16_t (2b), uint32_t (4b), uint64_t (8b),
      uint128_t (16b), int8_t (1b), int16_t (2b), int32_t (4b), int64_t
      (8b), bool (1b)
  dynamic storage layout is an implementation detail of the Allocator
</pre><p>A zerobuf always contains a static storage area, and optionally a dynamic storage area for objects with dynamically-sized members. The static storage section is at the beginning of the zerobuf. It contains a version, followed by the headers for dynamic members and the storage for static data. The number of dynamic storage headers and the layout of the static storage section follows directly from the schema. The schema is defined by the .fbs input file and available as the Schema structure from each Zerobuf object.</p>
<p>The version is used to detect zerobuf format changes and the producer endianness.</p>
<p>The dynamic storage headers contain an offset and size to point to memory allocation in the dynamic storage section. The offset is in bytes from the beginning of the zerobuf. The size is in bytes. The Allocator may create holes during allocations in the dynamic storage section. A dynamic allocation is either a dynamic array or a (recursive) zerobuf managed by a sub allocator. Array allocations only store their data in the allocations. A dynamic Zerobuf sub-object stores a full zerobuf, as specified here. Strings ([string] in .fbs) are handled as a dynamic char array.</p>
<p>The static storage section contains all members whose allocation size can be determined at schema compile time. This includes builtin types and static-sized Zerobuf objects, as well as static-sized arrays of the aforementioned. 128-bit integers are exposed through servus::uint128_t in the generated C++ API. All other types are exposed by their corresponding C++ type. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 18 2016 10:30:18 for ZeroBuf by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
